#define DSP_IF_STATUS_GLOBALS

#include "all.h"

////////////////////////////////////////////////////////////////////////
// Function	: _dsp_in_sequence
// Brief	: 
// Input	:
// Return	:
// History	:
// Date		:
////////////////////////////////////////////////////////////////////////
int _dsp_in_sequence(int ax)
{
	if (pCBuf[ax]->in_sequence)
	{
		return TRUE;
	}
	else
	{
		return FALSE;
	}
}

////////////////////////////////////////////////////////////////////////
// Function	: _dsp_in_motion
// Brief	: 
// Input	:
// Return	:
// History	:
// Date		:
////////////////////////////////////////////////////////////////////////
int _dsp_in_motion(int ax)
{
	if (_dsp_get_com_velocity(ax))
	{
		return TRUE;
	}
	else
	{
		return FALSE;
	}
}

////////////////////////////////////////////////////////////////////////
// Function	: _dsp_in_position
// Brief	: 
// Input	:
// Return	:
// History	:
// Date		:
////////////////////////////////////////////////////////////////////////
int _dsp_in_position(int ax)
{
	if (pCBuf[ax]->in_pos_flag)
	{
		return TRUE;
	}
	else
	{
		return FALSE;
	}
}

////////////////////////////////////////////////////////////////////////
// Function	: _dsp_motion_done
// Brief	: 
// Input	:
// Return	:
// History	:
// Date		:
////////////////////////////////////////////////////////////////////////
int _dsp_motion_done(int ax)
{
	if((!_dsp_in_motion(ax)) && (!_dsp_in_sequence(ax)))	
	{
		return TRUE;
	}
	else
	{
		return FALSE;
	}
}

////////////////////////////////////////////////////////////////////////
// Function	: _dsp_axis_done
// Brief	: 
// Input	:
// Return	:
// History	:
// Date		:
////////////////////////////////////////////////////////////////////////
int _dsp_axis_done(int ax)
{
	if(_dsp_motion_done(ax) && _dsp_in_position(ax))
	{
		return TRUE;
	}
	else
	{
		return FALSE;
	}
}

////////////////////////////////////////////////////////////////////////
// Function	: _dsp_axis_state
// Brief	: 
// Input	:
// Return	:
// History	:
// Date		:
////////////////////////////////////////////////////////////////////////
int _dsp_axis_state(int ax)
{
	int	st = __GetAxisStat(ax);

	return st;
}

////////////////////////////////////////////////////////////////////////
// Function	: _dsp_axis_source
// Brief	: 
// Input	:
// Return	:
// History	:
// Date		:
////////////////////////////////////////////////////////////////////////
int _dsp_axis_source(int ax)
{
	return	pCBuf[ax]->axis_source;
}

////////////////////////////////////////////////////////////////////////
// Function	: _dsp_clear_status
// Brief	: 
// Input	:
// Return	:
// History	:
// Date		:
////////////////////////////////////////////////////////////////////////
int _dsp_clear_status(int ax)
{
	if(_dsp_in_motion(ax))
	{
		amc_error = MMC_ON_MOTION;
		return amc_error;
	}
	
	__ClearStatus(ax);

	return amc_error;
}

////////////////////////////////////////////////////////////////////////
// Function	: _dsp_frames_clear
// Brief	: 
// Input	:
// Return	:
// History	:
// Date		:
////////////////////////////////////////////////////////////////////////
int _dsp_frames_clear(int ax)
{

	if((ax >= TOTAL_AXIS_NUM) || ax<0)		
	{
		amc_error = MMC_INVALID_AXIS;
		return amc_error;
	}
	
	__SetFramesClear(ax);

	return MMC_OK;
}

